\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{components/bubbles}[2025/11/25 Genesis Chat Components]

\RequirePackage{tcolorbox}
\tcbuselibrary{skins, breakable}
\RequirePackage{fontawesome5}
\RequirePackage{styles/colors}
\RequirePackage{styles/typography}

% =======================================================================
% 1. THE BASE GEOMETRY
% =======================================================================
\tcbset{
    bubblebase/.style={
        enhanced,
        breakable,
        frame hidden,
        arc=3mm,
        boxrule=0mm,
        left=4mm, right=4mm, top=3mm, bottom=3mm,
        fontupper=\sffamily,
        drop shadow
    }
}

% =======================================================================
% 2. THE SYSTEM BUBBLE (The Engine)
% =======================================================================
\newtcolorbox{systemchat}[1][]{
    bubblebase,
    width=12cm,
    halign=flush left,
    enlarge right by=4cm,
    colback=ui_dark_bubble_sys,
    coltext=ui_dark_text_primary,
    title={\scriptsize \faRobot \hspace{1mm} \textbf{SYSTEM B}},
    coltitle=mit_steel!50!white,
    attach boxed title to top left={yshift=-2mm, xshift=2mm},
    boxed title style={frame hidden, colback=ui_dark_bubble_sys},
    #1
}

% =======================================================================
% 3. THE USER BUBBLE (The Hunter)
% =======================================================================
\newtcolorbox{userchat}[1][]{
    bubblebase,
    width=12cm,
    halign=flush left,
    enlarge left by=4cm,
    colback=ui_dark_bubble_user, 
    coltext=white,
    title={\scriptsize \faUserAstronaut \hspace{1mm} \textbf{THE CVO}},
    coltitle=white!90!mit_cardinal,
    attach boxed title to top right={yshift=-2mm, xshift=-2mm},
    boxed title style={frame hidden, colback=ui_dark_bubble_user},
    #1
}

\endinput