\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{components/terminal}[2025/11/25 Genesis Terminal]

\RequirePackage{tcolorbox}
\tcbuselibrary{listings, skins}
\RequirePackage{styles/colors}
\RequirePackage{styles/typography}

% =======================================================================
% 1. THE SYNTAX HIGHLIGHTER (The Parser)
% Defining how code looks (Green strings, Cyan keys)
% =======================================================================
\lstdefinestyle{genesis_syntax}{
    language=Java, % Good enough for JS/JSON syntax
    basicstyle=\ttfamily\small\color{term_green}, % Fira Code + Green
    keywordstyle=\color{term_cyan}\bfseries,
    stringstyle=\color{term_amber},
    commentstyle=\color{mit_steel}\itshape,
    numberstyle=\tiny\color{term_dim},
    numbers=left,
    stepnumber=1,
    breaklines=true,
    showstringspaces=false,
    tabsize=2,
    frame=none
}

% =======================================================================
% 2. THE TERMINAL WINDOW (The Container)
% Looks like a CRT monitor or a VS Code window.
% =======================================================================
\newtcblisting{genesisblock}[2][]{
    enhanced,
    colback=term_bg,      % The Void
    colframe=mit_charcoal,% The Bezel
    colupper=term_green,
    
    % Geometry
    arc=1mm,
    boxrule=0.5pt,
    left=6mm, % Space for line numbers
    
    % The Header Bar (Like a window title)
    title={\ttfamily \scriptsize \faTerminal \hspace{2mm} #2},
    coltitle=mit_steel,
    attach boxed title to top left={xshift=0mm, yshift=0mm},
    boxed title style={
        frame hidden, 
        colback=mit_charcoal, 
        sharp corners=south
    },
    
    % Connect logic
    listing only,
    listing options={style=genesis_syntax},
    
    % Shadow for "Floating Window" effect
    drop shadow={opacity=0.5, shadow xshift=2mm, shadow yshift=-2mm},
    
    #1
}

\endinput